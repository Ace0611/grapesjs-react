{"version":3,"sources":["webpack:///./src/Editor/Editor.tsx","webpack:///./.storybook/config.tsx","webpack:///./.storybook/style.scss?f274","webpack:///./.storybook/style.scss","webpack:///./src sync \\.stories\\.tsx$","webpack:///./src/Editor/Editor.stories.tsx"],"names":["presets","webpage","newsletter","mjml","Editor","forwardRef","props","ref","id","onInit","onDestroy","presetType","blockManager","storageManager","styleManager","width","height","children","plugins","editor","setEditor","handleCleanup","useCallback","editors","filter","e","destroy","document","container","getElementById","innerHTML","useEffect","newEditor","init","fromElement","propPlugins","defaultProps","blocks","components","req","storyFn","loadStories","keys","forEach","module","content","i","options","locals","exports","___CSS_LOADER_API_IMPORT___","___CSS_LOADER_AT_RULE_IMPORT_0___","___CSS_LOADER_AT_RULE_IMPORT_1___","___CSS_LOADER_AT_RULE_IMPORT_2___","___CSS_LOADER_AT_RULE_IMPORT_3___","push","map","webpackContext","webpackContextResolve","__webpack_require__","o","Error","code","webpackContextKeys","Object","resolve","add","Default","Mounting","mount","setMountState","className","htmlType","type","onClick","handleMountEditor"],"mappings":"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","file":"main.f69a60e28a01104be6f0.bundle.js","sourcesContent":["import GrapesJS from 'grapesjs';\nimport mjml from 'grapesjs-mjml';\nimport newsletter from 'grapesjs-preset-newsletter';\nimport webpage from 'grapesjs-preset-webpage';\nimport React from 'react';\n\nconst presets = {\n  webpage,\n  newsletter,\n  mjml,\n};\n\nexport interface IEditorProps {\n  id?: string;\n\n  presetType?: 'webpage' | 'newsletter' | 'mjml';\n\n  plugins?: string[];\n\n  children?: React.ReactElement<any> | Array<React.ReactElement<any>>;\n\n  storageManager?: any;\n\n  blockManager?: any;\n\n  styleManager?: {};\n\n  width?: string | number;\n\n  height?: string | number;\n\n  components?: object[];\n\n  blocks?: object[];\n\n  onInit?(editor: any): void;\n\n  onDestroy?(editor: any): void;\n}\n\nconst Editor = React.forwardRef(\n  (props: IEditorProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      id,\n      onInit,\n      onDestroy,\n      presetType,\n      blockManager,\n      storageManager,\n      styleManager,\n      width,\n      height,\n      children,\n      plugins: propPlugins,\n    } = props;\n\n    const [editor, setEditor] = React.useState<any>(GrapesJS.editors.find((e: any) => {\n      return e.getContainer().id === id;\n    }));\n\n    const handleCleanup = React.useCallback(\n      () => {\n        if (editor) {\n          if (onDestroy) {\n            onDestroy(editor);\n          }\n          GrapesJS.editors = GrapesJS.editors.filter((e: any) => e !== editor);\n          editor.destroy();\n          if (document) {\n            const container: HTMLDivElement = document.getElementById(id) as HTMLDivElement;\n            if (container) {\n              container.innerHTML = '';\n            }\n          }\n        }\n      },\n      [editor, id, onDestroy],\n    );\n\n    React.useEffect(\n      () => {\n        if (!editor) {\n          const newEditor = GrapesJS.init({\n            container: `#${id}`,\n            fromElement: true,\n            blockManager,\n            styleManager,\n            storageManager,\n            width,\n            height,\n            plugins: [\n              presets[presetType],\n              ...propPlugins,\n            ],\n          });\n          setEditor(newEditor);\n          if (onInit) {\n            onInit(newEditor);\n          }\n        }\n        return handleCleanup;\n      },\n      // tslint:disable-next-line:max-line-length\n      [blockManager, editor, handleCleanup, height, id, onInit, presetType, propPlugins, storageManager, styleManager, width],\n    );\n\n    return (\n      <div id={id} ref={ref}>\n        {children}\n      </div>\n    );\n  },\n);\n\nEditor.defaultProps = {\n  id: 'grapesjs-react-editor',\n  presetType: 'newsletter',\n  plugins: [],\n  blocks: [],\n  blockManager: {},\n  storageManager: {},\n  styleManager: {},\n  width: 'auto',\n  height: '100vh',\n  components: [],\n};\n\nexport default Editor;\n","import {addDecorator, configure} from '@storybook/react';\nimport Card from 'antd/lib/card';\nimport * as React from 'react';\nimport './style.scss';\n\n// automatically import all files ending in GrapesJS.stories.tsx\nconst req = require.context('../src', true, /\\.stories\\.tsx$/);\n\naddDecorator((storyFn) => (\n  <Card>\n    {storyFn()}\n  </Card>\n));\n\nfunction loadStories() {\n  req.keys()\n    .forEach(req);\n}\n\nconfigure(loadStories, module);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_0___ = require(\"-!../node_modules/css-loader/dist/cjs.js!antd/dist/antd.min.css\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_1___ = require(\"-!../node_modules/css-loader/dist/cjs.js!bootstrap/dist/css/bootstrap.min.css\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_2___ = require(\"-!../node_modules/css-loader/dist/cjs.js!codemirror/theme/monokai.css\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_3___ = require(\"-!../node_modules/css-loader/dist/cjs.js!grapesjs/dist/css/grapes.min.css\");\nexports = module.exports = ___CSS_LOADER_API_IMPORT___(false);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_1___);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_2___);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_3___);\n// Module\nexports.push([module.id, \"\\n\", \"\"]);\n","var map = {\n\t\"./Editor/Editor.stories.tsx\": 826\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 825;","import {storiesOf} from '@storybook/react';\nimport Button from 'antd/lib/button';\nimport * as React from 'react';\nimport Editor from './Editor';\n\nstoriesOf('Editor', module)\n  .add('Default', function Default() {\n    return (\n      <>\n        <Editor>\n          <div> Default editor content, drag some elements here!</div>\n        </Editor>\n      </>\n    );\n  })\n  .add('Mounting', function Mounting() {\n    const [mount, setMountState] = React.useState<boolean>(false);\n\n    function handleMountEditor() {\n      setMountState(!mount);\n    }\n\n    return (\n      <>\n        <div className=\"mb-2\">\n          <Button htmlType=\"button\" type=\"primary\" onClick={handleMountEditor}>\n            {mount ? 'Unmount' : 'Mount'}\n          </Button>\n        </div>\n        {mount && (\n          <Editor/>\n        )}\n      </>\n    );\n  });\n"],"sourceRoot":""}